<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Reporting - TP2</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<link href="libs/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="libs/highlightjs-1.1/highlight.js"></script>
<!--
    Font Awesome
-->
<script src="https://use.fontawesome.com/32d8325004.js"></script>
<link rel="stylesheet" href="libs/font-awesome-4.7.0/css/font-awesome.min.css">

<!--
    CSS perso
-->
<style>
    .contenu {
        margin-bottom: 50px;
    }

    .contact-liens {
        text-align: center;
    }
    .contact-liens:hover {
        text-decoration: none;
    }
    .contact-icones {
        height: 30px;
    }

    /* Espacement pour barre du haut et pied de page */
    #header, .section.level1 {
        margin-top: 60px;
        margin-bottom: 60px;
    }
    /* Espacement pour table des matières */
    #TOC {
        margin-top: 100px;
    }
    
    .footer {
        position: fixed;
        width: 100%;
        text-align: center;
        bottom: 0;
        left: 0;
        background-color: #E6E6E6;
    }
</style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="libs/bootstrap-journal.min.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->





<div class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-main">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">FX Jollois</a>
    </div>
    <div id="navbar-main" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">Données <span class="caret"></span></a>
          <ul class="dropdown-menu">
              <li><a href="accesdonnees.html">A télécharger</a></li>
              <li><a href="donnees-integrees-r.html">Sous R</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">Enseignement <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li class="dropdown-header">DUT 1ère année</li>
            <li><a href="exploitation-donnees.html">Exploitation de données</a></li>
            <li><a href="initiation-a-r.html">Initiation à R</a></li>
            <li><a href="reporting.html">Reporting</a></li>
            <li><a href="complements-r.html">Compléments sur R</a></li>
            <li class="dropdown-header">DUT 2ème année</li>
            <li><a href="prog-stat-r.html">Programmation statistique avec R</a></li>
            <li class="dropdown-header">LP MDS Santé</li>
            <li><a href="info-dec-sante.html">Informatique décisionnelle</a></li>
            <li class="dropdown-header">DU Analyste Big Data</li>
            <li><a href="initiation-r-du.html">Initiation à R</a></li>
            <li><a href="connexion-r-mongodb.html">Connexion entre R et MongoDB</a></li>
            <li class="dropdown-header">DU Dataviz</li>
            <li><a href="analyse-donnees.html">Analyse de données</a></li>
            <li><a href="visualisation-donnees.html">Visualisation de données - R</a></li>
            <li><a href="visualisation-donnees-tableau.html">Visualisation de données - Tableau</a></li>
            <li><a href="visualisation-donnees-d3.html">Visualisation de données - D3</a></li>
            <li role="separator" class="divider"></li>
            <li class="dropdown-header">Master</li>
            <li><a href="slides/cnam-classif-modeles.html">Classification et Modèles de mélange</a></li>
            <li><a href="analyse-donnees-massives.html">Analyse de Données Massives</a></li>
            <li class="dropdown-header">Iran</li>
            <li><a href="stat-prog-R.html">Statistical Programming using R</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">Recherche <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="recherche.html">Sujets</a></li>
            <li><a href="publications.html">Publications</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">Réalisations <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="realisations.html">Détail</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="http://up5.fr/explore-data" target="_blank">explore-data</a></li>
            <li><a href="http://fxjollois.github.io/cours-sql/" target="_blank">Appli web de cours pour SQL</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container-fluid -->
</div>
<div class="contenu">

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Reporting - TP2</h1>

</div>


<style>
img {
    margin: 10px auto;
}
em {
    background-color: #f4f4f4;
    padding: 0 5px;
    font-style: normal;
}
</style>
<p>Dans <strong>Tableau Public</strong>, ouvrez le résultat obtenu suite au TP1 (<a href="reporting/tp2/Reporting%20-%20TP1.twbx">workbook téléchargeable</a>). Vous noterez que tous les graphiques sont présents avec une couleur dans l’onglet en bas, permettant de repérer quels graphiques sont pour quels tableaux. Les données sont intégrées dans le fichier.</p>
<div id="creation-dune-table-de-contingence-avec-les-pourcentages-en-lignes-ou-en-colonnes" class="section level2">
<h2>Création d’une table de contingence, avec les pourcentages en lignes ou en colonnes</h2>
<ul>
<li>Double-cliquer sur <em>DUT</em></li>
<li>Double-cliquer sur <em>Parcours Libelles</em></li>
<li>Double-cliquer sur <em>Number of records</em></li>
<li>Vous obtenez la table de contingence des deux variables (i.e. le nombre de répondants ayant telle modalité pour la première variable et telle autre modalité pour l’autre variable - ici 23 diplômés <code>STID</code> ont fait trois ans d’études).</li>
<li>Il serait intéressant d’avoir ce qu’on appelle des profils : par exemple, parmi les diplômés de <code>STID</code>, quelle est la proportion de répondants qui ont été travaillé, ont fait une année, deux années ou trois années d’études.</li>
<li>Aller dans le menu <em>Analysis</em> puis <em>Percentage of rows</em>.</li>
<li>On a maintenant la répartition en pourcentage des différents parcours, pour chaque DUT, ce qui est plus pratique pour les comparer.</li>
</ul>
<div id="avec-un-diagramme-en-barres-empilees" class="section level3">
<h3>Avec un diagramme en barres empilées</h3>
<p>Pour avoir la même représentation, mais graphique cette fois-ci, il faut créer ce qu’on appelle un diagramme en barres empilées.</p>
<ul>
<li>A partir du tableau obtenu précédemment, cliquer sur l’icône suivante<br><img src="reporting/tp2/icone-diagramme-barres-empilees.png" alt="icône pour un diagramme en barres empilées" /></li>
<li>Comme la variable <em>DUT</em> est passée en colonne, les pourcentages ne sont plus corrects.</li>
<li>Aller dans <em>Analysis</em> puis <em>Percentage of</em> (remarquez que <em>None</em> est cochée), et cliquer sur <em>Column</em>.</li>
</ul>
</div>
</div>
<div id="utilisation-dun-graphique-comme-filtre" class="section level2">
<h2>Utilisation d’un graphique comme filtre</h2>
<ul>
<li>Reprenez le <em>dashboard</em> nommé <em>Reporting 1</em>.</li>
<li>Faites un clic-droit dans le graphique <em>Répartition DUT</em>, puis cliquer sur <em>Use as filter</em>.</li>
<li>Une fois cela fait, lorsque vous cliquez sur un département, les autres graphiques (<em>Répartition Sexe</em> et carte <em>Origine Etudiants</em>) sont mis à jour. Elles ne concernent que les étudiants du département sélectionné.</li>
<li>La carte est fixe, car elle est dite <em>épinglée</em> (cf le dessin d’épingle quand on passe la souris dessus). Ceci permet que son affichage ne change pas à chaque clic de souris. Ce n’est pas le comportement par défaut. Pour l’obtenir (ou revenir à l’état initial), il suffit de cliquer sur l’épingle. Si vous faites cela, en cliquant sur <code>INFO</code>, on remarque que la carte est zoomée par rapport aux autres départements.</li>
</ul>
<p>Il est aussi possible de créer des filtres permettant le choix de plusieurs modalités (clic-droit puis <em>Quick filters</em>).</p>
</div>
<div id="creation-dune-nouvelle-variable" class="section level2">
<h2>Création d’une nouvelle variable</h2>
<p>Il est possible de créer des nouveaux champs directement dans <strong>Tableau</strong>.</p>
<ul>
<li>Faire un clic-droit dans l’espace vide en-dessous des <em>measures</em> ou aller dans le menu <em>Analysis</em>.</li>
<li>Cliquer sur <em>Create calculated field</em>, une fenêtre devrait apparaître.</li>
<li>Donner lui un nom (<em>Age</em> ici).</li>
<li>Cliquer dans l’espace vide en dessous du nom de la variable.</li>
<li>En cliquant sur la flèche à droite, il est possible d’avoir accès aux différentes fonctions présentes dans <strong>Tableau</strong></li>
<li>Sélectionner les fonctions de <em>Date</em> et double-cliquer sur <code>DATEDIFF</code>.</li>
<li>Le premier paramètre est l’unité utilisée pour le retour de la fonction (ici <code>&quot;year&quot;</code> - n’oubliez pas les <code>&quot; &quot;</code>).</li>
<li>Ensuite, on va commencer à écrire le nom de la variable qui nous intéresse (ici <em>Date de naissance</em>). <strong>Tableau</strong> reconnaît les mots-clés (fonctions ou variables) commençant par les lettres tapées. Choississez la <em>Date de naissance</em>.</li>
<li>Enfin, on va prendre la <em>Date d’enregistrement</em> pour avoir l’âge en année au moment de l’enquête donc.</li>
<li>Vous devriez avoir comme formule <br><code>DATEDIFF(&quot;year&quot;, [Date de naissance], [Date Enregistrement])</code></li>
<li>Cliquer sur <em>OK</em>. La variable <em>Age</em> s’est ajoutée dans les <em>measures</em> à gauche.</li>
</ul>
</div>
<div id="creation-dun-nuage-de-points-avec-tendance" class="section level2">
<h2>Création d’un nuage de points, avec tendance</h2>
<ul>
<li>Double-cliquer sur <em>Age</em>.</li>
<li>Double-cliquer sur <em>Durée de saisie</em>.</li>
<li>Vous ne devriez n’avoir aucun rendu. Les variables sont considérées comme des <em>measures</em> et doivent être ici considérées comme des <em>dimensions</em>.</li>
<li>Faites un clic sur la flèche présente lorsqu’on glisse la souris sur <code>SUM(Age)</code> dans la partie <em>Rows</em>, puis cliquer sur <em>Dimension</em>.</li>
<li>Faites de même pour <code>SUM(Duree Saisie)</code>.</li>
<li>On voit ainsi un nuage de points apparaître, l’âge en fonction de la durée de saisie. C’est plutôt dans l’autre sens qu’il faudrait le présenter.</li>
<li>Aller dans le menu <em>Analysis</em> puis cliquer sur <em>Swap rows and columns</em>. Le graphique a été transposé.</li>
<li>On semble voir un lien mais on a une donnée très éloignée des autre (<code>58820</code> alors que la moyenne semble être autour de <code>2000</code>). Il est possible de l’exclure du graphique en faisant un clic-droit dessus, puis <em>Exclude</em>.</li>
<li>Pour aller plus loin dans l’analyse de la tendance, <strong>Tableau</strong> propose de la représenter sur le graphique.</li>
<li>Faites un clic-droit sur le graphique et aller dans <em>Trend lines</em> puis cliquer sur <em>Show trend lines</em>.</li>
<li>Vous voyez apparaître une droite en gris foncé entre deux courbes en gris clair. Lorsque vous passez votre souris dessus, vous devez voir apparaître une équation, dont vous découvrirez au cours de cette année, dans les cours de statistiques, sa signification et comment on l’obtient.</li>
</ul>
</div>
<div id="creation-dune-hierarchie" class="section level2">
<h2>Création d’une hiérarchie</h2>
<p>Une hiérarchie entre plusieurs variables permettra une navigation entre les différents éléments, nommée <strong>drill-down</strong>. Nous allons créer une hiérarchie sur la nature du DUT.</p>
<ul>
<li>Faites un clic-droit sur <em>Tertiaire/Secondaire</em> dans les <em>dimensions</em>.</li>
<li>Cliquer sur <em>Hierarchy</em> puis <em>Create hierarchy</em>.</li>
<li>Nommer la <em>Nature DUT</em>.</li>
<li>Vous devriez la voir apparaître dans les <em>dimensions</em>.</li>
<li>Pour la compléter, nous allons glisser les éléments suivants :
<ul>
<li><em>DUT</em> à placer en dessous de <em>Tertiaire/Secondaire</em>, en faisant attention à ce qu’il soit bien dans la hiérarchie,</li>
<li><em>Option de DUT</em> à placer en dessous de <em>DUT</em>, toujours dans la hiérarchie.</li>
</ul></li>
<li>Pour mieux comprendre l’intérêt d’une hiérarchie, créer une nouvelle <em>sheet</em>.</li>
<li>Glisser <em>Nature DUT</em> dans les lignes.</li>
<li>Glisser <em>Number of records</em> dans le tableau.</li>
<li>Lorsque vous passer la souris sur les modalités de la variable, vous devriez voir apparaître un <em>+</em> au-dessus du nom de la variable.</li>
<li>Cliquer sur le <em>+</em>. On voit les départements correspondants au secteur tertiaire (tous sauf <code>INFO</code>) et secondaire (seulement <code>INFO</code>).</li>
<li>Cliquer sur le <em>+</em> au-dessus de <em>DUT</em>. On voit maintenant les options des différents DUT.</li>
<li>Pour revenir en arrière, il suffit de cliquer sur le <em>-</em>.</li>
</ul>
</div>
<div id="creation-dun-treemap" class="section level2">
<h2>Création d’un <em>treemap</em></h2>
<p>On va utiliser cette hiérarchie pour créer une représentation moins traditionnelle mais très utilisée en ce moment, un <em>treemap</em>.</p>
<ul>
<li>Refaire une <em>sheet</em> avec <em>Nature DUT</em> en ligne et <em>Number of Records</em> en contenu de cellule.</li>
<li>Cliquer sur l’icône suivante :<br><img src="reporting/tp2/icone-treemap.png" alt="icône pour créer un treemap" /></li>
<li>Pour naviguer dans la hiérarchie, vous devez maintenant cliquer sur les <em>+</em> ou <em>-</em> qui sont dans la fenêtre <em>Marks</em>.</li>
<li>Malheureusement, l’intégration de d’un <em>treemap</em> dans un <em>dashboard</em> ou une <em>story</em> n’intégre pas la possibilité de ce drill-down direcetement, au contraire d’autres représentations.</li>
</ul>
</div>
<div id="utilisation-du-mode-story" class="section level2">
<h2>Utilisation du mode <em>Story</em></h2>
<p>Ce mode permet d’intégrer plusieurs <em>dashboards</em> (ou <em>sheets</em> mais c’est peut-être moins intéressant) et d’avoir un menu permettant de naviguer parmi ceux-ci.</p>
<ul>
<li>Aller dans le menu, cliquer sur <em>Story</em> puis <em>New story</em>.</li>
<li>Double-cliquer sur <code>Titre de l'histoire</code> puis écrire <em>Enquête DUT + 2,5 ans</em>.</li>
<li>Glisser le tableau <em>Reporting 1</em> dans le grand cadre.</li>
<li>Double-cliquer sur <em>Add a caption</em> pour écrire <em>Origine</em>.</li>
<li>Ensuite, cliquer sur <em>New Blank …</em>.</li>
<li>Glisser le tableau <em>Reporting 2</em> et donner comme légende <em>Devenir</em>.</li>
<li>Comme vous pouvez le voir, ainsi, il est possible de naviguer entre les deux tableaux :
<ul>
<li>soit en cliquant directement sur la légende associée,</li>
<li>soit avec les flèches gauche et droite pour naviguer.</li>
</ul></li>
</ul>
</div>
<div id="a-faire" class="section level2">
<h2>A FAIRE</h2>
<p>Il existe beaucoup d’autres possibilités de représentations et de choix. Testez différents choix de graphiques ou tableaux.</p>
</div>

</div>
<div class="footer">
      Site créé avec <a href="http://www.r-project.org" target="_blank"><code>R</code></a> et la 
      librairie  <a href="http://rmarkdown.rstudio.com/" target="_blank"><code>rmarkdown</code></a>.
</div>
<script>
    $("#TOC").css("margin-top", "100px");
</script>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>

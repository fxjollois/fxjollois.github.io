<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Fonctions et listes - correction</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<link href="libs/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="libs/highlightjs-1.1/highlight.js"></script>
<!--
    Font Awesome
-->
<script src="https://use.fontawesome.com/32d8325004.js"></script>
<link rel="stylesheet" href="libs/font-awesome-4.7.0/css/font-awesome.min.css">

<!--
    CSS perso
-->
<style>
    .contenu {
        margin-bottom: 50px;
    }

    .contact-liens {
        text-align: center;
    }
    .contact-liens:hover {
        text-decoration: none;
    }
    .contact-icones {
        height: 30px;
    }

    /* Espacement pour barre du haut et pied de page */
    #header, .section.level1 {
        margin-top: 60px;
        margin-bottom: 60px;
    }
    /* Espacement pour table des matières */
    #TOC {
        margin-top: 100px;
    }
    
    .footer {
        position: fixed;
        width: 100%;
        text-align: center;
        bottom: 0;
        left: 0;
        background-color: #E6E6E6;
    }
</style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="libs/bootstrap-journal.min.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->





<div class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-main">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">FX Jollois</a>
    </div>
    <div id="navbar-main" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">Données <span class="caret"></span></a>
          <ul class="dropdown-menu">
              <li><a href="accesdonnees.html">A télécharger</a></li>
              <li><a href="donnees-integrees-r.html">Sous R</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">Enseignement <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li class="dropdown-header">DUT 1ère année</li>
            <li><a href="exploitation-donnees.html">Exploitation de données</a></li>
            <li><a href="initiation-a-r.html">Initiation à R</a></li>
            <li><a href="reporting.html">Reporting</a></li>
            <li><a href="complements-r.html">Compléments sur R</a></li>
            <li class="dropdown-header">DUT 2ème année</li>
            <li><a href="prog-stat-r.html">Programmation statistique avec R</a></li>
            <li class="dropdown-header">LP MDS Santé</li>
            <li><a href="info-dec-sante.html">Informatique décisionnelle</a></li>
            <li class="dropdown-header">DU Analyste Big Data</li>
            <li><a href="initiation-r-du.html">Initiation à R</a></li>
            <li><a href="connexion-r-mongodb.html">Connexion entre R et MongoDB</a></li>
            <li class="dropdown-header">DU Dataviz</li>
            <li><a href="analyse-donnees.html">Analyse de données</a></li>
            <li><a href="visualisation-donnees.html">Visualisation de données - R</a></li>
            <li><a href="visualisation-donnees-tableau.html">Visualisation de données - Tableau</a></li>
            <li><a href="visualisation-donnees-d3.html">Visualisation de données - D3</a></li>
            <li role="separator" class="divider"></li>
            <li class="dropdown-header">Master</li>
            <li><a href="slides/cnam-classif-modeles.html">Classification et Modèles de mélange</a></li>
            <li><a href="analyse-donnees-massives.html">Analyse de Données Massives</a></li>
            <li class="dropdown-header">Iran</li>
            <li><a href="stat-prog-R.html">Statistical Programming using R</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">Recherche <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="recherche.html">Sujets</a></li>
            <li><a href="publications.html">Publications</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">Réalisations <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="realisations.html">Détail</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="http://up5.fr/explore-data" target="_blank">explore-data</a></li>
            <li><a href="http://fxjollois.github.io/cours-sql/" target="_blank">Appli web de cours pour SQL</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container-fluid -->
</div>
<div class="contenu">

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Fonctions et listes - correction</h1>
<h3 class="subtitle"><em>Compléments sur <code>R</code> - STID 1ère année</em></h3>

</div>


<div id="exercices" class="section level2">
<h2>Exercices</h2>
<div id="sur-les-fonctions" class="section level3">
<h3>sur les fonctions</h3>
<div id="affichage-dun-pays" class="section level4">
<h4>Affichage d’un pays</h4>
<p>Créer une fonction <code>affichePays()</code> qui prend en paramètre un nom de pays et un continent, et qui l’affiche sur une ligne (de type <code>pays (continent)</code>)</p>
<pre class="r"><code>affichePays &lt;- function(pays, continent) {
    cat(pays, &quot; (&quot;, continent, &quot;)\n&quot;, sep = &quot;&quot;)
}
affichePays(&quot;France&quot;, &quot;Europe&quot;)</code></pre>
<pre><code>France (Europe)</code></pre>
<p>Ajouter un paramètre à cette fonction, qui sera l’année d’indépendance (avec la valeur <code>NA</code> par défaut)</p>
<ul>
<li>Si l’année est <code>NA</code>, alors on affichera <code>pays (continent)</code></li>
<li>sinon, on affichera : <code>pays (continent - indépendance en XXXX)</code></li>
</ul>
<pre class="r"><code>affichePays &lt;- function(pays, continent, annee = NA) {
    cat(pays, &quot; (&quot;, continent, sep = &quot;&quot;)
    if (!is.na(annee)) {
        cat(&quot; - independance en&quot;, annee)
    }
    cat(&quot;)\n&quot;)
}
affichePays(&quot;France&quot;, &quot;Europe&quot;)</code></pre>
<pre><code>France (Europe)</code></pre>
<pre class="r"><code>affichePays(&quot;France&quot;, &quot;Europe&quot;, 843)</code></pre>
<pre><code>France (Europe - independance en 843)</code></pre>
<pre class="r"><code>affichePays(&quot;France&quot;, &quot;Europe&quot;, NA)</code></pre>
<pre><code>France (Europe)</code></pre>
</div>
<div id="calcul-du-ratio" class="section level4">
<h4>Calcul du ratio</h4>
<p>Créer une fonction avec les caractéristiques suivantes :</p>
<ul>
<li>Paramètres :
<ul>
<li>une valeur (population d’un pays)</li>
<li>un vecteur de valeur (population de plusieurs villes)</li>
</ul></li>
<li>Retour :
<ul>
<li>le ratio entre la somme des valeurs du vecteur (des populations des villes) et la première valeur (population d’un pays)</li>
</ul></li>
<li>Par exemple :
<ul>
<li><code>ratio(10, c(1, 2, 3))</code> renverra <code>.6</code></li>
</ul></li>
</ul>
<pre class="r"><code>ratio &lt;- function(pop.pays, pop.villes) {
    r = sum(pop.villes) / pop.pays
    return(r)
}
ratio(10, 1:3)</code></pre>
<pre><code>[1] 0.6</code></pre>
</div>
</div>
<div id="world" class="section level3">
<h3><code>world</code></h3>
<p>A partir des données présentes dans le fichier <a href="donnees/World/world-liste.Rdata"><code>world-liste.RData</code></a>, répondre aux questions suivantes. Ces données concernent les pays dans le monde (à la fin du siècle dernier), et sont représentées sous forme de liste dans l’objet <code>Country.liste</code>.</p>
<pre class="r"><code># chargement des données
load(&quot;donnees/World/world-liste.Rdata&quot;)</code></pre>
<div id="donner-le-nombre-de-pays-representes" class="section level4">
<h4>Donner le nombre de pays représentés</h4>
<pre class="r"><code>length(Country.liste)</code></pre>
<pre><code>[1] 239</code></pre>
</div>
<div id="calculer-la-population-mondiale" class="section level4">
<h4>Calculer la population mondiale</h4>
<p>Deux façons ici</p>
<pre class="r"><code>Reduce(
    function(a, b) {
        a$Population = a$Population + b$Population
        return(a)
    },
    Country.liste,
    list(Population = 0)
)</code></pre>
<pre><code>$Population
[1] 6078749450</code></pre>
<p>ou</p>
<pre class="r"><code>sum(
    sapply(
        Country.liste,
        function(p) { return(as.numeric(p$Population)) }
    )
)</code></pre>
<pre><code>[1] 6078749450</code></pre>
</div>
<div id="affichage-de-tous-les-pays" class="section level4">
<h4>Affichage de tous les pays</h4>
<p>Utiliser la fonction <code>affichePays()</code> créée précédemment dans une fonction anonyme, pour afficher les informations des pays (un pays par ligne)</p>
<pre class="r"><code>invisible(
    lapply(
        Country.liste,
        function(p) {
            affichePays(p$Name, p$Continent, p$IndepYear)
        }
    )
)</code></pre>
<pre><code>Aruba (North America)
Afghanistan (Asia - independance en 1919)
Angola (Africa - independance en 1975)
Anguilla (North America)
Albania (Europe - independance en 1912)
Andorra (Europe - independance en 1278)
Netherlands Antilles (North America)
United Arab Emirates (Asia - independance en 1971)
Argentina (South America - independance en 1816)
Armenia (Asia - independance en 1991)
American Samoa (Oceania)
Antarctica (Antarctica)
French Southern territories (Antarctica)
Antigua and Barbuda (North America - independance en 1981)
Australia (Oceania - independance en 1901)
Austria (Europe - independance en 1918)
Azerbaijan (Asia - independance en 1991)
Burundi (Africa - independance en 1962)
Belgium (Europe - independance en 1830)
Benin (Africa - independance en 1960)
Burkina Faso (Africa - independance en 1960)
Bangladesh (Asia - independance en 1971)
Bulgaria (Europe - independance en 1908)
Bahrain (Asia - independance en 1971)
Bahamas (North America - independance en 1973)
Bosnia and Herzegovina (Europe - independance en 1992)
Belarus (Europe - independance en 1991)
Belize (North America - independance en 1981)
Bermuda (North America)
Bolivia (South America - independance en 1825)
Brazil (South America - independance en 1822)
Barbados (North America - independance en 1966)
Brunei (Asia - independance en 1984)
Bhutan (Asia - independance en 1910)
Bouvet Island (Antarctica)
Botswana (Africa - independance en 1966)
Central African Republic (Africa - independance en 1960)
Canada (North America - independance en 1867)
Cocos (Keeling) Islands (Oceania)
Switzerland (Europe - independance en 1499)
Chile (South America - independance en 1810)
China (Asia - independance en -1523)
Côte d’Ivoire (Africa - independance en 1960)
Cameroon (Africa - independance en 1960)
Congo, The Democratic Republic of the (Africa - independance en 1960)
Congo (Africa - independance en 1960)
Cook Islands (Oceania)
Colombia (South America - independance en 1810)
Comoros (Africa - independance en 1975)
Cape Verde (Africa - independance en 1975)
Costa Rica (North America - independance en 1821)
Cuba (North America - independance en 1902)
Christmas Island (Oceania)
Cayman Islands (North America)
Cyprus (Asia - independance en 1960)
Czech Republic (Europe - independance en 1993)
Germany (Europe - independance en 1955)
Djibouti (Africa - independance en 1977)
Dominica (North America - independance en 1978)
Denmark (Europe - independance en 800)
Dominican Republic (North America - independance en 1844)
Algeria (Africa - independance en 1962)
Ecuador (South America - independance en 1822)
Egypt (Africa - independance en 1922)
Eritrea (Africa - independance en 1993)
Western Sahara (Africa)
Spain (Europe - independance en 1492)
Estonia (Europe - independance en 1991)
Ethiopia (Africa - independance en -1000)
Finland (Europe - independance en 1917)
Fiji Islands (Oceania - independance en 1970)
Falkland Islands (South America)
France (Europe - independance en 843)
Faroe Islands (Europe)
Micronesia, Federated States of (Oceania - independance en 1990)
Gabon (Africa - independance en 1960)
United Kingdom (Europe - independance en 1066)
Georgia (Asia - independance en 1991)
Ghana (Africa - independance en 1957)
Gibraltar (Europe)
Guinea (Africa - independance en 1958)
Guadeloupe (North America)
Gambia (Africa - independance en 1965)
Guinea-Bissau (Africa - independance en 1974)
Equatorial Guinea (Africa - independance en 1968)
Greece (Europe - independance en 1830)
Grenada (North America - independance en 1974)
Greenland (North America)
Guatemala (North America - independance en 1821)
French Guiana (South America)
Guam (Oceania)
Guyana (South America - independance en 1966)
Hong Kong (Asia)
Heard Island and McDonald Islands (Antarctica)
Honduras (North America - independance en 1838)
Croatia (Europe - independance en 1991)
Haiti (North America - independance en 1804)
Hungary (Europe - independance en 1918)
Indonesia (Asia - independance en 1945)
India (Asia - independance en 1947)
British Indian Ocean Territory (Africa)
Ireland (Europe - independance en 1921)
Iran (Asia - independance en 1906)
Iraq (Asia - independance en 1932)
Iceland (Europe - independance en 1944)
Israel (Asia - independance en 1948)
Italy (Europe - independance en 1861)
Jamaica (North America - independance en 1962)
Jordan (Asia - independance en 1946)
Japan (Asia - independance en -660)
Kazakstan (Asia - independance en 1991)
Kenya (Africa - independance en 1963)
Kyrgyzstan (Asia - independance en 1991)
Cambodia (Asia - independance en 1953)
Kiribati (Oceania - independance en 1979)
Saint Kitts and Nevis (North America - independance en 1983)
South Korea (Asia - independance en 1948)
Kuwait (Asia - independance en 1961)
Laos (Asia - independance en 1953)
Lebanon (Asia - independance en 1941)
Liberia (Africa - independance en 1847)
Libyan Arab Jamahiriya (Africa - independance en 1951)
Saint Lucia (North America - independance en 1979)
Liechtenstein (Europe - independance en 1806)
Sri Lanka (Asia - independance en 1948)
Lesotho (Africa - independance en 1966)
Lithuania (Europe - independance en 1991)
Luxembourg (Europe - independance en 1867)
Latvia (Europe - independance en 1991)
Macao (Asia)
Morocco (Africa - independance en 1956)
Monaco (Europe - independance en 1861)
Moldova (Europe - independance en 1991)
Madagascar (Africa - independance en 1960)
Maldives (Asia - independance en 1965)
Mexico (North America - independance en 1810)
Marshall Islands (Oceania - independance en 1990)
Macedonia (Europe - independance en 1991)
Mali (Africa - independance en 1960)
Malta (Europe - independance en 1964)
Myanmar (Asia - independance en 1948)
Mongolia (Asia - independance en 1921)
Northern Mariana Islands (Oceania)
Mozambique (Africa - independance en 1975)
Mauritania (Africa - independance en 1960)
Montserrat (North America)
Martinique (North America)
Mauritius (Africa - independance en 1968)
Malawi (Africa - independance en 1964)
Malaysia (Asia - independance en 1957)
Mayotte (Africa)
Namibia (Africa - independance en 1990)
New Caledonia (Oceania)
Niger (Africa - independance en 1960)
Norfolk Island (Oceania)
Nigeria (Africa - independance en 1960)
Nicaragua (North America - independance en 1838)
Niue (Oceania)
Netherlands (Europe - independance en 1581)
Norway (Europe - independance en 1905)
Nepal (Asia - independance en 1769)
Nauru (Oceania - independance en 1968)
New Zealand (Oceania - independance en 1907)
Oman (Asia - independance en 1951)
Pakistan (Asia - independance en 1947)
Panama (North America - independance en 1903)
Pitcairn (Oceania)
Peru (South America - independance en 1821)
Philippines (Asia - independance en 1946)
Palau (Oceania - independance en 1994)
Papua New Guinea (Oceania - independance en 1975)
Poland (Europe - independance en 1918)
Puerto Rico (North America)
North Korea (Asia - independance en 1948)
Portugal (Europe - independance en 1143)
Paraguay (South America - independance en 1811)
Palestine (Asia)
French Polynesia (Oceania)
Qatar (Asia - independance en 1971)
Réunion (Africa)
Romania (Europe - independance en 1878)
Russian Federation (Europe - independance en 1991)
Rwanda (Africa - independance en 1962)
Saudi Arabia (Asia - independance en 1932)
Sudan (Africa - independance en 1956)
Senegal (Africa - independance en 1960)
Singapore (Asia - independance en 1965)
South Georgia and the South Sandwich Islands (Antarctica)
Saint Helena (Africa)
Svalbard and Jan Mayen (Europe)
Solomon Islands (Oceania - independance en 1978)
Sierra Leone (Africa - independance en 1961)
El Salvador (North America - independance en 1841)
San Marino (Europe - independance en 885)
Somalia (Africa - independance en 1960)
Saint Pierre and Miquelon (North America)
Sao Tome and Principe (Africa - independance en 1975)
Suriname (South America - independance en 1975)
Slovakia (Europe - independance en 1993)
Slovenia (Europe - independance en 1991)
Sweden (Europe - independance en 836)
Swaziland (Africa - independance en 1968)
Seychelles (Africa - independance en 1976)
Syria (Asia - independance en 1941)
Turks and Caicos Islands (North America)
Chad (Africa - independance en 1960)
Togo (Africa - independance en 1960)
Thailand (Asia - independance en 1350)
Tajikistan (Asia - independance en 1991)
Tokelau (Oceania)
Turkmenistan (Asia - independance en 1991)
East Timor (Asia)
Tonga (Oceania - independance en 1970)
Trinidad and Tobago (North America - independance en 1962)
Tunisia (Africa - independance en 1956)
Turkey (Asia - independance en 1923)
Tuvalu (Oceania - independance en 1978)
Taiwan (Asia - independance en 1945)
Tanzania (Africa - independance en 1961)
Uganda (Africa - independance en 1962)
Ukraine (Europe - independance en 1991)
United States Minor Outlying Islands (Oceania)
Uruguay (South America - independance en 1828)
United States (North America - independance en 1776)
Uzbekistan (Asia - independance en 1991)
Holy See (Vatican City State) (Europe - independance en 1929)
Saint Vincent and the Grenadines (North America - independance en 1979)
Venezuela (South America - independance en 1811)
Virgin Islands, British (North America)
Virgin Islands, U.S. (North America)
Vietnam (Asia - independance en 1945)
Vanuatu (Oceania - independance en 1980)
Wallis and Futuna (Oceania)
Samoa (Oceania - independance en 1962)
Yemen (Asia - independance en 1918)
Yugoslavia (Europe - independance en 1918)
South Africa (Africa - independance en 1910)
Zambia (Africa - independance en 1964)
Zimbabwe (Africa - independance en 1980)</code></pre>
</div>
<div id="nouvelle-liste-avec-ratio" class="section level4">
<h4>Nouvelle liste avec ratio</h4>
<p>Utiliser la fonction de calcul de ratio de la population pour savoir pour chaque pays le ratio entre la population des villes de celui-ci et la population du pays</p>
<p>Idéalement, créer une nouvelle liste qui ajoute cette information aux autres, pour chaque pays</p>
<pre class="r"><code>Country.liste2 = lapply(
    Country.liste,
    function(p) {
        p$Ratio = ratio(p$Population, p$City$Population)
        return(p)
    }
)</code></pre>
<p>Ici, on créé une nouvelle liste avec uniquement le nom et le ratio de chaque pays.</p>
<pre class="r"><code>Country.ratio = lapply(
    Country.liste,
    function(p) {
        res = list(
            Name = p$Name,
            Ratio = ratio(p$Population, p$City$Population)
        )
        return(res)
    }
)</code></pre>
</div>
<div id="pays-avec-ratio-1" class="section level4">
<h4>Pays avec ratio &gt; 1</h4>
<p>Identifier quels pays ont un ratio supérieur à <code>1</code> avec la nouvelle liste créée</p>
<pre class="r"><code>Filter(
    function(p) { return(p$Ratio &gt; 1)},
    Country.ratio
)</code></pre>
<pre><code>[[1]]
[[1]]$Name
[1] &quot;Cocos (Keeling) Islands&quot;

[[1]]$Ratio
[1] 1.116667


[[2]]
[[2]]$Name
[1] &quot;Gibraltar&quot;

[[2]]$Ratio
[1] 1.081


[[3]]
[[3]]$Name
[1] &quot;Singapore&quot;

[[3]]$Ratio
[1] 1.126362</code></pre>
</div>
</div>
</div>

</div>
<div class="footer">
      Site créé avec <a href="http://www.r-project.org" target="_blank"><code>R</code></a> et la 
      librairie  <a href="http://rmarkdown.rstudio.com/" target="_blank"><code>rmarkdown</code></a>.
</div>
<script>
    $("#TOC").css("margin-top", "100px");
</script>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>

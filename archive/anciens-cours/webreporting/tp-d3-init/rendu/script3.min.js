function popMove(){var d=d3.select("#newPop"),c=d.style("width").replace("px",""),a=d.style("height").replace("px",""),b=d3.event;if(b.clientX>(window.innerWidth-c-10)){d.style("left",b.clientX-c-10+"px")}else{d.style("left",b.clientX+10+"px")}if(b.clientY>(window.innerHeight-a-10)){d.style("top",b.clientY-a-10+"px")}else{d.style("top",b.clientY+"px")}}function popUp(a){var c=d3.select("#newPop"),b=this.modalite,d=this.valeur;c.html("<div class='modalite'>"+b+"</div><div class='valeur'>"+d+"</div>");c.style("display","block");popMove()}function popDown(){var a=d3.select("#newPop");a.style("display","none")}function c(){var f=d3.select("#newGraph"),c,b,e,d,a;if(f[0][0]!==null){a=f.style("visibility");if(a==="visible"){f.style("visibility","hidden")}else{f.style("visibility","visible")}}else{f=d3.select("body").append("div").attr("id","newGraph");b=f.style("width").replace("px","");e=Math.floor(b/donnees.modalites.length);d=f.selectAll("div").data(donnees.valeurs).enter().append("div").classed({newGroup:true}).style("width",e+"px");d.append("div").classed({newVal:true}).html(function(g){return g});d.append("div").classed({newBar:true}).style("height",function(g){return(g*10)+"px"}).property("modalite",function(g,h){return donnees.modalites[h]}).property("valeur",function(g){return g}).on("mouseover",popUp).on("mouseout",popDown).on("mousemove",popMove);d.append("div").classed({newMod:true}).html(function(g,h){return donnees.modalites[h]});c=f.append("div").attr("id","newPop")}};